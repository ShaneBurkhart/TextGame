package com.donkka.entities;

import java.util.ArrayList;

import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.graphics.Color;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.badlogic.gdx.graphics.glutils.ShapeRenderer;
import com.badlogic.gdx.graphics.glutils.ShapeRenderer.ShapeType;
import com.badlogic.gdx.math.Vector2;
import com.donkka.patches.RecentlyPlayedNinePatch;
import com.donkka.sprites.DoubleFloatingNinePatch;

public class RecentlyPlayed{
	
	private static final float MARGIN_X = 10;

	private ArrayList<RecentlyPlayedListItem> items;
	private DoubleFloatingNinePatch background;
	
	public RecentlyPlayed(float marginTop, float height){
		background = new DoubleFloatingNinePatch(MARGIN_X, marginTop, height, RecentlyPlayedNinePatch.getInstance());
		items = new ArrayList<RecentlyPlayed.RecentlyPlayedListItem>();
	}
	
	public void render(SpriteBatch batch){
		background.render(batch);
		for(RecentlyPlayedListItem i: items){
			if(i != null){
				i.update(Gdx.graphics.getDeltaTime());
				i.render(batch);
			}
		}
	}
	
	public void add(String word){
		items.add(new RecentlyPlayedListItem(word));
	}
	
	public class RecentlyPlayedListItem{
		
		private static final float MARGIN = 20;
		private static final float ANIM_VEL = 100;
		
		public String word;
		public Vector2 pos;
		private Vector2 targetPos;
		ShapeRenderer shapes = new ShapeRenderer();
		
		public RecentlyPlayedListItem(String word){
			this.word = word;
			this.pos = new Vector2(background.getPos().x + MARGIN, background.getPos().y + MARGIN);
			this.targetPos = new Vector2();
		}
		
		public void render(SpriteBatch batch){
			batch.end();
			shapes.setProjectionMatrix(batch.getProjectionMatrix());
			shapes.begin(ShapeType.Filled);
			shapes.setColor(Color.BLACK);
			shapes.rect(pos.x, pos.y, 200, 40);
			shapes.end();
			batch.begin();
		}
		
		public void update(float delta){
			this.pos.set(background.getPos().x + MARGIN, background.getPos().y + MARGIN);
		}
		
		public void animate(float x, float y){
			
		}
	}
}
